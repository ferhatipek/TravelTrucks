import{a as b,b as _,j as t,I as N,s as Y,V as G,t as J,c as X,d as Z,P as u,L as ee,F as te,e as se,f as ne,i as ie,r as q,g as P,h as L}from"./index-D--o0_8S.js";import{B as T}from"./Button-D_caQJnP.js";import{f as oe,R as ae,a as re,g as ce,b as le,s as de,c as pe,d as ue,e as me}from"./selectors-CXFnSR4e.js";function fe(e,n=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(n)}function _e(e,n=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(n)}function he(e,n="expected all items to be functions, instead received the following types: "){if(!e.every(i=>typeof i=="function")){const i=e.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${n}[${i}]`)}}var S=e=>Array.isArray(e)?e:[e];function ge(e){const n=Array.isArray(e[0])?e[0]:e;return he(n,"createSelector expects all input-selectors to be functions, but received the following types: "),n}function ve(e,n){const i=[],{length:s}=e;for(let o=0;o<s;o++)i.push(e[o].apply(null,n));return i}var xe=class{constructor(e){this.value=e}deref(){return this.value}},ye=typeof WeakRef<"u"?WeakRef:xe,je=0,z=1;function k(){return{s:je,v:void 0,o:null,p:null}}function A(e,n={}){let i=k();const{resultEqualityCheck:s}=n;let o,a=0;function c(){var v;let r=i;const{length:h}=arguments;for(let m=0,F=h;m<F;m++){const g=arguments[m];if(typeof g=="function"||typeof g=="object"&&g!==null){let f=r.o;f===null&&(r.o=f=new WeakMap);const x=f.get(g);x===void 0?(r=k(),f.set(g,r)):r=x}else{let f=r.p;f===null&&(r.p=f=new Map);const x=f.get(g);x===void 0?(r=k(),f.set(g,r)):r=x}}const d=r;let l;if(r.s===z)l=r.v;else if(l=e.apply(null,arguments),a++,s){const m=((v=o==null?void 0:o.deref)==null?void 0:v.call(o))??o;m!=null&&s(m,l)&&(l=m,a!==0&&a--),o=typeof l=="object"&&l!==null||typeof l=="function"?new ye(l):l}return d.s=z,d.v=l,l}return c.clearCache=()=>{i=k(),c.resetResultsCount()},c.resultsCount=()=>a,c.resetResultsCount=()=>{a=0},c}function Ne(e,...n){const i=typeof e=="function"?{memoize:e,memoizeOptions:n}:e,s=(...o)=>{let a=0,c=0,r,h={},d=o.pop();typeof d=="object"&&(h=d,d=o.pop()),fe(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const l={...i,...h},{memoize:v,memoizeOptions:m=[],argsMemoize:F=A,argsMemoizeOptions:g=[]}=l,f=S(m),x=S(g),M=ge(o),$=v(function(){return a++,d.apply(null,arguments)},...f),U=F(function(){c++;const Q=ve(M,arguments);return r=$.apply(null,Q),r},...x);return Object.assign(U,{resultFunc:d,memoizedResultFunc:$,dependencies:M,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>r,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:v,argsMemoize:F})};return Object.assign(s,{withTypes:()=>s}),s}var E=Ne(A),be=Object.assign((e,n=E)=>{_e(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const i=Object.keys(e),s=i.map(a=>e[a]);return n(s,(...a)=>a.reduce((c,r,h)=>(c[i[h]]=r,c),{}))},{withTypes:()=>be});const I=e=>e.filters.location,W=e=>e.filters.form,O=e=>e.filters.equipment,B=E([I,W,O],(e,n,i)=>{const s={};Object.entries(i).forEach(([a,c])=>{c===!0&&(s[a]=!0)});const o={};return e&&(o.location=e),n&&(o.form=n),Object.assign(o,s),o}),Fe="_locationFilter_1rvkx_1",Ce="_label_1rvkx_7",Re="_inputWrapper_1rvkx_13",ke="_icon_1rvkx_17",we="_input_1rvkx_13",C={locationFilter:Fe,label:Ce,inputWrapper:Re,icon:ke,input:we},Le=()=>{const e=b(),n=_(I),i=s=>{e(Y(s.target.value))};return t.jsxs("div",{className:C.locationFilter,children:[t.jsx("label",{htmlFor:"location",className:C.label,children:"Location"}),t.jsxs("div",{className:C.inputWrapper,children:[t.jsx(N,{name:"icon-location",size:20,className:C.icon}),t.jsx("input",{id:"location",type:"text",value:n,onChange:i,placeholder:"City, Country",className:C.input})]})]})},Te="_equipmentFilter_d54x5_1",Ee="_title_d54x5_5",Me="_divider_d54x5_12",$e="_grid_d54x5_18",qe="_option_d54x5_24",Pe="_active_d54x5_44",y={equipmentFilter:Te,title:Ee,divider:Me,grid:$e,option:qe,active:Pe},Se=()=>{const e=b(),n=_(O),i=s=>{e(J(s))};return t.jsxs("div",{className:y.equipmentFilter,children:[t.jsx("h3",{className:y.title,children:"Vehicle equipment"}),t.jsx("div",{className:y.divider}),t.jsx("div",{className:y.grid,children:G.map(({value:s,label:o,icon:a})=>t.jsxs("button",{type:"button",onClick:()=>i(s),className:`${y.option} ${n[s]?y.active:""}`,"aria-pressed":n[s],children:[t.jsx(N,{name:a,size:32}),t.jsx("span",{children:o})]},s))})]})},ze="_vehicleTypeFilter_1opda_1",Ae="_subtitle_1opda_5",Ie="_grid_1opda_23",We="_option_1opda_30",Oe="_active_1opda_50",j={vehicleTypeFilter:ze,subtitle:Ae,grid:Ie,option:We,active:Oe},Be=()=>{const e=b(),n=_(W),i=s=>{e(Z(s===n?"":s))};return t.jsxs("div",{className:j.vehicleTypeFilter,children:[t.jsx("h3",{className:j.subtitle,children:"Vehicle type"}),t.jsx("div",{className:j.divider}),t.jsx("div",{className:j.grid,children:X.map(({value:s,label:o,icon:a})=>t.jsxs("button",{type:"button",onClick:()=>i(s),className:`${j.option} ${n===s?j.active:""}`,"aria-pressed":n===s,children:[t.jsx(N,{name:a,size:32}),t.jsx("span",{children:o})]},s))})]})},Ve="_filterPanel_1amgi_1",De={filterPanel:Ve},V=({onApplyFilters:e})=>{const n=_(B),i=()=>{e(n)};return t.jsxs("aside",{className:De.filterPanel,children:[t.jsx(Le,{}),t.jsx(Se,{}),t.jsx(Be,{}),t.jsx(T,{onClick:i,variant:"primary",size:"large",children:"Search"})]})};V.propTypes={onApplyFilters:u.func.isRequired};const He=e=>e.favorites.items,Ue=e=>E([He],n=>n.includes(e)),Ke="_card_1pgda_1",Qe="_imageWrapper_1pgda_15",Ye="_image_1pgda_15",Ge="_content_1pgda_30",Je="_header_1pgda_37",Xe="_title_1pgda_44",Ze="_priceRow_1pgda_52",et="_price_1pgda_52",tt="_favoriteBtn_1pgda_65",st="_meta_1pgda_88",nt="_location_1pgda_95",it="_description_1pgda_109",ot="_features_1pgda_120",at="_feature_1pgda_120",rt="_showMoreLink_1pgda_145",p={card:Ke,imageWrapper:Qe,image:Ye,content:Ge,header:Je,title:Xe,priceRow:Ze,price:et,favoriteBtn:tt,meta:st,location:nt,description:it,features:ot,feature:at,showMoreLink:rt},D=({camper:e})=>{var c,r,h;const n=b(),i=_(Ue(e.id)),s=()=>{n(se(e.id))},a=te.filter(d=>{const l=e[d];return l&&l!==!1}).slice(0,6);return t.jsxs("article",{className:p.card,children:[t.jsx("div",{className:p.imageWrapper,children:t.jsx("img",{src:((r=(c=e.gallery)==null?void 0:c[0])==null?void 0:r.thumb)||"/placeholder.jpg",alt:e.name,className:p.image})}),t.jsxs("div",{className:p.content,children:[t.jsxs("div",{className:p.header,children:[t.jsx("h3",{className:p.title,children:e.name}),t.jsxs("div",{className:p.priceRow,children:[t.jsx("span",{className:p.price,children:oe(e.price)}),t.jsx("button",{type:"button",onClick:s,className:p.favoriteBtn,"aria-label":i?"Remove from favorites":"Add to favorites",children:t.jsx(N,{name:i?"icon-heart-filled":"icon-heart",size:24,className:p.favoriteIcon})})]})]}),t.jsxs("div",{className:p.meta,children:[t.jsx(ae,{rating:e.rating,reviews:((h=e.reviews)==null?void 0:h.length)||0}),t.jsxs("div",{className:p.location,children:[t.jsx(N,{name:"icon-location",size:16}),t.jsx("span",{children:re(e.location)})]})]}),t.jsx("p",{className:p.description,children:e.description.length>150?`${e.description.substring(0,150)}...`:e.description}),t.jsx("div",{className:p.features,children:a.map(d=>{const l=ce(d),v=e[d],m=le(d,v);return t.jsxs("div",{className:p.feature,children:[t.jsx(N,{name:l,size:20}),t.jsx("span",{children:m})]},d)})}),t.jsx(ee,{to:`/catalog/${e.id}`,className:p.showMoreLink,target:"_blank",rel:"noopener noreferrer",children:t.jsx(T,{variant:"primary",size:"medium",children:"Show more"})})]})]})};D.propTypes={camper:u.shape({id:u.string.isRequired,name:u.string.isRequired,price:u.number.isRequired,rating:u.number.isRequired,location:u.string.isRequired,description:u.string.isRequired,gallery:u.arrayOf(u.shape({thumb:u.string,original:u.string})),reviews:u.array}).isRequired};const ct="_campersList_kss1x_1",lt="_list_kss1x_7",dt="_item_kss1x_13",pt="_empty_kss1x_17",ut="_loadMore_kss1x_26",R={campersList:ct,list:lt,item:dt,empty:pt,loadMore:ut},H=({onLoadMore:e})=>{const n=b(),i=_(de),s=_(pe),o=_(ue),a=_(me),c=()=>{n(ie()),e(a+1)};return s&&i.length===0?t.jsx(ne,{}):!s&&i.length===0?t.jsx("div",{className:R.empty,children:t.jsx("p",{children:"No campers found. Try adjusting your filters."})}):t.jsxs("div",{className:R.campersList,children:[t.jsx("ul",{className:R.list,children:i.map(r=>t.jsx("li",{className:R.item,children:t.jsx(D,{camper:r})},r.id))}),o&&t.jsx("div",{className:R.loadMore,children:t.jsx(T,{onClick:c,variant:"outline",size:"large",disabled:s,children:s?"Loading...":"Load more"})})]})};H.propTypes={onLoadMore:u.func.isRequired};const mt="_catalogPage_iirwg_1",ft="_content_iirwg_7",_t="_sidebar_iirwg_14",ht="_main_iirwg_18",w={catalogPage:mt,content:ft,sidebar:_t,main:ht},yt=()=>{const e=b(),n=_(B),i=q.useRef(!0);q.useEffect(()=>{if(i.current){i.current=!1;const a=Object.keys(n).length>0;e(P()),e(L({page:1,filters:a?n:{}}))}},[]);const s=a=>{e(P()),e(L({page:1,filters:a}))},o=a=>{e(L({page:a,filters:n,append:!0}))};return t.jsx("div",{className:w.catalogPage,children:t.jsx("div",{className:"container",children:t.jsxs("div",{className:w.content,children:[t.jsx("aside",{className:w.sidebar,children:t.jsx(V,{onApplyFilters:s})}),t.jsx("main",{className:w.main,children:t.jsx(H,{onLoadMore:o})})]})})})};export{yt as default};
//# sourceMappingURL=CatalogPage-BxEPy7VN.js.map
